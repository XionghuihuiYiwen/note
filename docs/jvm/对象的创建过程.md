### 对象的创建及内存分配

#### 确认对象的存储位置

对象在创建时，需要先确定其放到哪个位置中

这里有两种方式：

  - 指针碰撞：假设堆空间的内存空间是非常规整的，即内存两边一边存储已分配对象的内存区域，一边存储未分配内存的区域，这样只需要维护一个指针，在分配对象的内存空间时，计算出这个对象所占用大小的空间，将指针向后挪对应大小的位置即可。这种确认内存分配区域的方式叫做指针碰撞。
  - 空闲列表：如果内存空间不是那么规整的结构，这里虚拟机维护一份系统中空闲内存区域的列表数据，当有对象要分配内存时，会先从空闲列表中找到一块足够对象分配大小的空间。这种寻找对象存放位置的方法叫做空闲列表。

#### 处理并发分配内存的问题

内存分配时可能存在并发进行分配的问题，这时候需要解决分配失败的问题。

这也有两种解决方法：

  1. CAS：如果并发分配失败就会进行不断的重试。
  2. TLAB：针对每个线程划分出一段内存空间的缓存区域，当每个线程创建对象过程中会在自己线程的缓存空间上分配，这样就避免了并发分配的问题。

#### 执行对象的初始化操作

为对象分配好内存区域后，另外会为对象头设置数据，其所有的属性都是零值，这里会接下来会执行程序员定义好的初始化方法（构造器定义的方法等）为对象进行初始化设置。